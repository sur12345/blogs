<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>迭代器和生成器 | SUR的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Hello World">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blogs/assets/css/0.styles.0941d0d5.css" as="style"><link rel="preload" href="/blogs/assets/js/app.3997f0e0.js" as="script"><link rel="preload" href="/blogs/assets/js/3.d21b2854.js" as="script"><link rel="preload" href="/blogs/assets/js/1.09293f92.js" as="script"><link rel="preload" href="/blogs/assets/js/10.bbe20fb6.js" as="script"><link rel="prefetch" href="/blogs/assets/js/11.9155a9ca.js"><link rel="prefetch" href="/blogs/assets/js/12.7d2777f0.js"><link rel="prefetch" href="/blogs/assets/js/13.dddad564.js"><link rel="prefetch" href="/blogs/assets/js/14.aca808e4.js"><link rel="prefetch" href="/blogs/assets/js/15.76690104.js"><link rel="prefetch" href="/blogs/assets/js/16.d393c8b0.js"><link rel="prefetch" href="/blogs/assets/js/17.0e9bb8c2.js"><link rel="prefetch" href="/blogs/assets/js/4.fa6b5f76.js"><link rel="prefetch" href="/blogs/assets/js/5.47a58204.js"><link rel="prefetch" href="/blogs/assets/js/6.c0165ada.js"><link rel="prefetch" href="/blogs/assets/js/7.bce202b7.js"><link rel="prefetch" href="/blogs/assets/js/8.95f46659.js"><link rel="prefetch" href="/blogs/assets/js/9.c35764ce.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.0941d0d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>SUR的博客</h3> <p class="description" data-v-59e6cb88>Hello World</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>sur</span>
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><img src="/blogs/avatar.jpg" alt="SUR的博客" class="logo"> <span class="site-name">SUR的博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      技术栈
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/Js/" class="nav-link"><i class="undefined"></i>
  Js
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/Vue3/" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/Sass/" class="nav-link"><i class="undefined"></i>
  Sass
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      SUR的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/sur12345" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/blogs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/blogs/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    sur
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>7</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>4</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/blogs/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      技术栈
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/Js/" class="nav-link"><i class="undefined"></i>
  Js
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/Vue3/" class="nav-link"><i class="undefined"></i>
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/Sass/" class="nav-link"><i class="undefined"></i>
  Sass
</a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      SUR的博客
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/sur12345" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/blogs/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>迭代器和生成器</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>sur</span>
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">迭代器和生成器</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>sur</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2024/5/26</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>Js</span></i></div></div> <div class="theme-reco-content content__default"><p>说起迭代，或许大多数人想到的就是循环，但是迭代和循环并不是等价的，循环是迭代机制的基础。那么什么是迭代呢？个人理解的是按照顺序重复多次执行同一段程序，通常会有明确的中止条件。
在 ECMAScript 6 规范中新增了两个高级特性：迭代器和生成器，将迭代的概念直接带入核心语言，并提供了一种机制来自定义 for...of 循环的行为。</p> <h2 id="迭代协议"><a href="#迭代协议" class="header-anchor">#</a> 迭代协议</h2> <p>迭代协议具体分为可迭代协议和迭代器协议。</p> <h3 id="可迭代协议"><a href="#可迭代协议" class="header-anchor">#</a> 可迭代协议</h3> <blockquote><p>可迭代协议允许 JavaScript 对象定义或定制它们的迭代行为。</p></blockquote> <p>一个对象要成为可迭代对象，必须实现@@iterator 方法，即对象（或者原型链上的某个对象）必须有一个键为 @@iterator 的属性，可通过常量 Symbol.iterator 访问该属性。所以：一个对象成为可迭代对象的条件：实现了@@iterator 方法 [Symbol.iterator]： 一个无参数的函数，其返回值为一个符合迭代器协议的对象。</p> <ul><li>当一个对象需要被迭代的时候，会首先不带参数调用其@@iterator 方法，然后使用此方法返回的迭代器获得要迭代的值。</li> <li>@@iterator 方法是被当作可迭代对象的方法进行调用的，其函数内部的 this 值指向可迭代对象。</li> <li>此函数可以是普通函数，也可以是生成器函数</li> <li>实际写代码时，不需要显示调用@@iterator 方法来生成迭代器。以下这些接收可迭代对象的原生语言特性会在后台调用提供的可迭代对象的@@iterator 方法来创建一个迭代器。
<ul><li>for-of 循环</li> <li>数组解构</li> <li>扩展操作符</li> <li>Array.from()</li> <li>创建集合</li> <li>创建映射</li> <li>Promise.all() 接收由 promise 组成的可迭代对象</li> <li>promise.race() 接收由 promise 组成的可迭代对象</li> <li>yield*操作符,在生成器中使用</li></ul></li></ul> <h3 id="迭代器协议"><a href="#迭代器协议" class="header-anchor">#</a> 迭代器协议</h3> <blockquote><p>迭代器协议定义了产生一系列值（无论是有限个还是无限个）的标准方式。当值为有限个时，所有的值都被迭代完毕后，则会返回一个默认返回值。</p></blockquote> <p>一个对象成为迭代器的条件：实现了一个拥有以下语义（semantic）的 next()方法</p> <p><strong>next</strong>： 一个无参数的或者可以接受一个参数的函数，必须返回一个应当拥有以下两个属性的对象：</p> <ul><li>done（boolean）：
<ul><li>如果迭代器可以产生序列中的下一个值，则为 false。（这等价于没有指定 done 这个属性。）</li> <li>如果迭代器已将序列迭代完毕，则为 true。这种情况下，value 是可选的，如果它依然存在，即为迭代结束之后的默认返回值。</li></ul></li> <li>value：迭代器返回的任何 JavaScript 值。done 为 true 时可省略。
<ul><li>如果返回了一个非对象值（比如 false 或 undefined），则会抛出一个 TypeError 异常（&quot;iterator.next() returned a non-object value&quot;）。</li></ul></li></ul> <p>如下代码中的对象同时满足可迭代协议和迭代器协议：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myIterator <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 实现了next方法</span>
    <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 实现了 @@iterator 方法</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="迭代器-iterator"><a href="#迭代器-iterator" class="header-anchor">#</a> 迭代器（iterator）</h2> <blockquote><p>在 JavaScript 中，迭代器是一个对象，它定义一个序列，并在中止时可能返回一个返回值。具体来说，迭代器是通过使用 next()方法实现迭代器协议的任何一个对象。</p></blockquote> <p>此外，迭代器是按需创建的一次性对象。每个迭代器都会关联一个可迭代对象，而迭代器会暴露迭代其关联可迭代对象的 API。迭代器无需了解与其关联的可迭代对象的结构，只需要知道如何取得连续的值。</p> <p>一旦创建，迭代器对象可以通过重复调用 next（）显式地迭代。 迭代一个迭代器被称为消耗了这个迭代器，因为它通常只能执行一次。 在产生终止值之后，对 next（）的额外调用应该继续返回{done：true}。</p> <p>以内置可迭代对象数组（Array）的为例，其内部包含[Symbol.iterator]属性，调用@@iterator 方法则会生成一个迭代器，然后通过迭代器的 next()消耗迭代器：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
iter <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">)</span> <span class="token comment">// Array Iterator {}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 3, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 6, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><h3 id="自定义迭代器"><a href="#自定义迭代器" class="header-anchor">#</a> 自定义迭代器</h3> <p>如上所述，成为可迭代对象需要实现@@iterator 方法，成为迭代器对象需要实现 next()方法。所以，一般自定义迭代器可写成如下形式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit
    <span class="token punctuation">}</span>

    <span class="token comment">// 实现了[Symbol.iterator] 方法，Counter满足成为可迭代对象的条件</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
            limit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// 实现了 next 方法，满足成为迭代器的条件，则该[Symbol.iterator]方法的返回值是一个迭代器</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 返回值包含 done 和 value 两个属性</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> count<span class="token operator">++</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 1 2 3</span>
<span class="token punctuation">}</span>
</code></pre></div><p>某些迭代器对象内部也实现了@@iterator 方法,且会返回相同的迭代器。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> iter1 <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> iter2 <span class="token operator">=</span> iter1<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iter1 <span class="token operator">===</span> iter2<span class="token punctuation">)</span>
</code></pre></div><h3 id="提前终止迭代器"><a href="#提前终止迭代器" class="header-anchor">#</a> 提前终止迭代器</h3> <blockquote><p>迭代器中可选的 return() 方法用于指定在迭代器提前关闭时执行的逻辑。</p></blockquote> <p>导致迭代器提前关闭的情况包括：</p> <ul><li>for-of 循环通过 break、continue、return 或者 throw 提前退出。</li> <li>解构操作未消费所有的值。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit
    <span class="token punctuation">}</span>

    <span class="token comment">// 实现了[Symbol.iterator] 方法，Counter满足成为可迭代对象的条件</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
            limit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// 实现了 next 方法，满足成为迭代器的条件，则该[Symbol.iterator]方法的返回值是一个迭代器</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 返回值包含 done 和 value 两个属性</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> count<span class="token operator">++</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 迭代器提前关闭执行的操作</span>
            <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;提前关闭！&quot;</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 提前关闭！</span>
</code></pre></div><p>但是需要注意的是，有些迭代器是不可关闭的（可通过检测迭代器实例的 return 属性是不是一个函数来判定），对一个不可关闭的迭代器添加 return 属性并不会让其变为可关闭的。例如，数组迭代器是不可关闭的。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> iter <span class="token operator">=</span> arr<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
iter<span class="token punctuation">.</span><span class="token function-variable function">return</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;提前关闭！&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1</span>
<span class="token comment">// 提前关闭！</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 3</span>
</code></pre></div><h2 id="生成器-generator"><a href="#生成器-generator" class="header-anchor">#</a> 生成器（generator）</h2> <blockquote><p>自定义的迭代器是一个有用的工具，但是由于需要显示地维护其内部状态，因此需要谨慎地创建， 对此 ES6 提供了生成器结构。</p></blockquote> <h3 id="生成器对象-generator"><a href="#生成器对象-generator" class="header-anchor">#</a> 生成器对象（Generator）</h3> <blockquote><p>生成器对象是由一个生成器函数返回的迭代器，并且<strong>符合可迭代协议和迭代器协议</strong>。</p></blockquote> <p>Generator 的原型上包含以下三种方法：</p> <ol><li><p>Generator.prototype.next()</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
</code></pre></div><ul><li>value：可选，向生成器传递的值.（如果传递了该参数，那么这个参数会传给上一条执行的 yield 语句左边的变量）</li> <li>返回值：返回的对象包含两个属性:
<ul><li>done (布尔类型)
<ul><li>如果迭代器超过迭代序列的末尾，则值为 true。 在这种情况下，value 可选地指定迭代器的返回值。</li> <li>如果迭代器能够生成序列中的下一个值，则值为 false。 这相当于没有完全指定 done 属性。</li></ul></li> <li>value
<ul><li>迭代器返回的任意的 Javascript 值。当 done 的值为 true 时可以忽略该值。</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token number">3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">a = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, b = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, c = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Generator { }&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 2, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 3, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// a = 9, b = undefined, c = 8</span>
<span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><p>从上述代码可以看出：</p> <ul><li>next()的参数会传给上一条执行的 yield 语句左边的变量。 所以，第一次调用 gen.next(10)，参数 10 并没有传递给任何变量。</li> <li>第二次调用 gen.next(9)时，参数 9 传递给了上一条执行的 yield 语句左边的变量 a</li> <li>第三次调用 gen.next()时，没有传递参数，所以变量 b 的值为 undefined</li> <li>第四次调用 gen.next(8)时，虽然返回值中 done: true，但也不影响参数的传递</li> <li>此外，next()函数的返回值，与传递的参数无关，只与 yield 右边返回的值以及生成器是否结束有关。</li></ul></li> <li><p>Generator.prototype.return()</p> <blockquote><p>return() 方法返回给定的值并结束生成器。</p></blockquote> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>gen<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
</code></pre></div><ul><li>value: 需要返回的值</li> <li>返回值：返回该函数参数中给定的值.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>

<span class="token comment">// 提前结束生成器</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: &quot;foo&quot;, done: true }</span>

<span class="token comment">// 生成器已结束，后续值无法迭代</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div></li> <li><p>Generator.prototype.throw()</p> <blockquote><p>throw() 方法用来向生成器抛出异常，并恢复生成器的执行，返回带有 done 及 value 两个属性的对象。</p></blockquote> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>gen<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>exception<span class="token punctuation">)</span>
</code></pre></div><ul><li>exception：用于抛出的异常。 使用 Error 的实例对调试非常有帮助.</li> <li>返回值：带有两个属性的对象
<ul><li>done (布尔类型)
<ul><li>如果迭代器超过迭代序列的末尾，则值为 true。 在这种情况下，value 可选地指定迭代器的返回值。</li> <li>如果迭代器能够生成序列中的下一个值，则值为 false。 这相当于没有完全指定 done 属性。</li></ul></li> <li>value
<ul><li>迭代器返回的任意的 Javascript 值。当 done 的值为 true 时可以忽略该值。</li></ul></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">yield</span> <span class="token number">42</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Error caught!&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 42, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Something went wrong&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Error caught!&quot;  { value: 42, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 42, done: false }</span>
</code></pre></div><p>从上述代码中可以看出，关于 throw()方法需要注意的是，throw()方法并不会结束生成器。</p></li></ol> <h3 id="yield-关键字"><a href="#yield-关键字" class="header-anchor">#</a> yield 关键字</h3> <blockquote><p>yield 关键字用来暂停和恢复一个生成器函数</p></blockquote> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">;</span><span class="token punctuation">[</span>rv<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token punctuation">[</span>expression<span class="token punctuation">]</span>
</code></pre></div><ul><li>expression： 定义通过迭代器协议从生成器函数返回的值。如果省略，则返回 undefined。</li> <li>rv：返回传递给生成器的 next()方法的可选值，以恢复其执行 yield 关键字使生成器函数执行暂停，yield 关键字后面的表达式的值返回给生成器的调用者。它可以被认为是一个基于生成器的版本的 return 关键字。</li></ul> <p>yield 关键字实际返回一个 IteratorResult 对象，它有两个属性，value 和 done。value 属性是对 yield 表达式求值的结果，而 done 是 false，表示生成器函数尚未完全完成。</p> <h3 id="yield-表达式"><a href="#yield-表达式" class="header-anchor">#</a> yield* 表达式</h3> <blockquote><p>yield* 表达式用于委托给另一个 generator 或可迭代对象。</p></blockquote> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">yield</span> <span class="token operator">*</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>expression<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>expression：返回一个可迭代对象的表达式。</p> <ul><li><p>yield*委托给其他生成器：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div></li> <li><p>yield*委托给其他可迭代对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 2, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div></li> <li><p>yield* 表达式迭代操作数，并产生它返回的每个值。</p></li> <li><p>yield* 表达式本身的值是当迭代器关闭时返回的值（即 done 为 true 时）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token string">&quot;foo&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> iterator <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}这里value不是&quot;foo&quot;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// &quot;foo&quot;</span>
<span class="token comment">// 若anotherGenerator函数没有显示返回 &quot;foo&quot;，那么result的值为undefined</span>
</code></pre></div></li></ul> <h3 id="生成器函数"><a href="#生成器函数" class="header-anchor">#</a> 生成器函数</h3> <blockquote><p>生成器函数允许定义一个包含自由迭代算法的函数，同时可以自动维护自己的状态。生成器函数在执行时能暂停，后面又能从暂停处继续执行。</p></blockquote> <p><strong>定义生成器函数</strong></p> <blockquote><p>在 JavaScript 中可以通过生成器函数声明、生成器函数表达式、GeneratorFunction 构造函数来定义生成器函数</p></blockquote> <ol><li><p>function*</p> <blockquote><p>function* 这种声明方式(function 关键字后跟一个星号)会定义一个生成器函数 ( generator function ) ，它返回一个 Generator 对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>param<span class="token punctuation">[</span><span class="token punctuation">,</span> param<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span> param<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> statements <span class="token punctuation">}</span>
</code></pre></div><ul><li>name：函数名</li> <li>param：要传递给函数的一个参数的名称，一个函数最多可以有 255 个参数。 可通过以下方式在不同地方定义生成器函数。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 生成器函数声明</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 生成器函数表达式</span>
<span class="token keyword">let</span> <span class="token function-variable function">generatorFn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 作为对象属字面量方法地生成器函数</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 作为类实例方法的生成器函数</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>GeneratorFunction</p> <blockquote><p>除了通过生成器函数声明和生成器函数表达式来定义生成器函数，也可以通过 GeneratorFunction 构造并创建新的生成器函数对象。在 JavaScript 中，生成器函数实际上都是 GeneratorFunction 的实例对象。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">GeneratorFunction</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>arg1<span class="token punctuation">[</span><span class="token punctuation">,</span> arg2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span>argN<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">]</span> functionBody<span class="token punctuation">)</span>
</code></pre></div><ul><li>arg1, arg2, ... argN：函数使用的名称作为形式参数名称。每个必须是一个字符串，对应于一个有效的 JavaScript 标识符或这样的字符串的列表，用逗号分隔；如“x”，“theValue”或“a,b”。</li> <li>functionBody：一个包含多条表示 JavaScript 函数体语句的字符串。</li></ul> <p>GeneratorFunction 不是全局对象，需要通过 Object.getPrototypeOf(function*(){}).constructor 获取</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取 GeneratorFunction 对象</span>
GeneratorFunction <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor

<span class="token comment">// 通过 GeneratorFunction 构造器创建生成器函数</span>
generatorFn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneratorFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generatorFn<span class="token punctuation">)</span> <span class="token comment">// ƒ* anonymous() { }</span>
</code></pre></div><p>所有生成器函数都是 GeneratorFunction 的实例对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generatorFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
GeneratorFunction <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>constructor

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generatorFn <span class="token keyword">instanceof</span> <span class="token class-name">GeneratorFunction</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>generatorFn<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">GeneratorFunction</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><p>注意：这种生成生成器函数的方式不推荐使用</p></li></ol> <p><strong>执行生成器函数</strong></p> <ol><li><p>生成器函数一般执行过程</p> <ul><li>首先并不会马上执行它里面的语句，而是返回一种称为 Generator 的 迭代器 （iterator）对象。</li> <li>当这个迭代器的 next() 方法被首次（后续）调用时，其内的语句会执行到第一个（后续）出现 yield 的位置为止，yield 后紧跟迭代器要返回的值。</li> <li>或者如果用的是 yield*（多了个星号），则表示将执行权移交给另一个生成器函数（当前生成器暂停执行），继续执行到另一个生成器函数出现 yield 的位置为止。</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 生成器函数</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">anotherGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token number">4</span>
<span class="token punctuation">}</span>

<span class="token comment">// 调用生成器函数首先返回一个Generator</span>
<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Generator { }&quot;</span>

<span class="token comment">// 首次调用 generator 的 next() 方法，执行到第一个yield出现的位置为止，并返回yield后的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>

<span class="token comment">// 接着调用 generator 的 next() 方法，遇到 yield* ，将执行权移交给 anotherGenerator</span>
<span class="token comment">// 继续执行到 anotherGenerator 出现 yield 的位置，并返回yield后的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 2, done: false}</span>

<span class="token comment">// 接着调用 generator 的 next() 方法，anotherGenerator 执行到出现 yield 的位置，并返回yield后的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 3, done: false}</span>

<span class="token comment">// 接着调用 generator 的 next() 方法，anotherGenerator 生成器函数已经执行完毕，执行权交回 generator</span>
<span class="token comment">// 继续执行到 generator 出现 yield 的位置，并返回yield后的值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 4, done: false}</span>

<span class="token comment">// generator 生成器函数执行完毕，next() 返回值中 done 为 true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><p>上述执行过程如下：</p> <p><img src="/blogs/assets/img/1.5915c1e4.png" alt="alt 属性文本"></p> <ol start="2"><li><p>带参数的生成器函数
生成器也可以接收参数</p> <div class="language- extra-class"><pre><code>```js
function* generator(n){
    yield n + 2;
}

var gen = generator(2);
console.log(gen.next().value); // 4
console.log(gen.next().value); // undefined
```
</code></pre></div></li> <li><p>生成器 暂停 或 结束 执行的条件</p> <blockquote><p>每次调用生成器的 next()方法时，生成器都会恢复执行，直到达到以下某个值：</p></blockquote> <ul><li>yield 导致生成器再次暂停并返回生成器的新值。 下一次调用 next()时，在 yield 之后紧接着的语句继续执行。</li> <li>到达生成器函数的结尾 在这种情况下，生成器的执行结束，并且 IteratorResult 给调用者返回 undefined 并且 done 为 true。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Generator { }&quot;</span>
<span class="token comment">// 遇到 yield 暂停并返回生成器的新值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 2, done: false}</span>

<span class="token comment">// 到达生成器函数的结尾, 生成器的执行结束</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><ul><li>到达 return 语句 在这种情况下，生成器的执行结束，并将 IteratorResult 返回给调用者，其值是由 return 语句指定的，并且 done 为 true。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Generator { }&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>

<span class="token comment">// 到达return语句，生成器结束</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 2, done: true}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: undefined, done: true}</span>
</code></pre></div><ul><li>throw 用于从生成器中抛出异常。这让生成器完全停止执行，并在调用者中继续执行，正如通常情况下抛出异常一样。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;Generator { }&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// {value: 1, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// Uncaught Error</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 该条语句不会继续执行了</span>
</code></pre></div></li> <li><p>提前终止生成器</p> <p>Generator 对象上有个方法 return()可以结束生成器，具体使用如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
    <span class="token keyword">yield</span> <span class="token number">2</span>
    <span class="token keyword">yield</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>

<span class="token comment">// 提前结束生成器</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: &quot;foo&quot;, done: true }</span>

<span class="token comment">// 生成器已结束，后续值无法迭代</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
</code></pre></div><p>此外，对于已经结束的生成器对象使用 return()方法，如果提供了参数，则参数将被设置为返回对象的 value 属性的值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> g <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: 1, done: false }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: undefined, done: true }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span><span class="token function">return</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// { value: &quot;foo&quot;, done: true }</span>
</code></pre></div></li></ol></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#迭代协议" class="sidebar-link reco-side-迭代协议" data-v-b57cc07c>迭代协议</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#可迭代协议" class="sidebar-link reco-side-可迭代协议" data-v-b57cc07c>可迭代协议</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#迭代器协议" class="sidebar-link reco-side-迭代器协议" data-v-b57cc07c>迭代器协议</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#迭代器-iterator" class="sidebar-link reco-side-迭代器-iterator" data-v-b57cc07c>迭代器（iterator）</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#自定义迭代器" class="sidebar-link reco-side-自定义迭代器" data-v-b57cc07c>自定义迭代器</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#提前终止迭代器" class="sidebar-link reco-side-提前终止迭代器" data-v-b57cc07c>提前终止迭代器</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#生成器-generator" class="sidebar-link reco-side-生成器-generator" data-v-b57cc07c>生成器（generator）</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#生成器对象-generator" class="sidebar-link reco-side-生成器对象-generator" data-v-b57cc07c>生成器对象（Generator）</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#yield-关键字" class="sidebar-link reco-side-yield-关键字" data-v-b57cc07c>yield 关键字</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#yield-表达式" class="sidebar-link reco-side-yield-表达式" data-v-b57cc07c>yield* 表达式</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blog/js/Iterator%E5%92%8CGenerator.html#生成器函数" class="sidebar-link reco-side-生成器函数" data-v-b57cc07c>生成器函数</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-1e9076fa><audio id="bgm" src="/blogs/bgm/萤火之森.flac" data-v-1e9076fa></audio> <div class="reco-float-box" style="bottom:20px;z-index:999999;display:none;" data-v-1e9076fa data-v-41bcba48 data-v-1e9076fa><img src="/blogs/cover/bgm.jpg" data-v-1e9076fa></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-1e9076fa data-v-41bcba48 data-v-1e9076fa><div class="reco-bgm-cover" style="background-image:url(/blogs/cover/bgm.jpg);" data-v-1e9076fa><div class="mini-operation" style="display:none;" data-v-1e9076fa><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-1e9076fa></i></div> <div class="falut-message" style="display:none;" data-v-1e9076fa>
                    播放失败
                </div></div> <div class="reco-bgm-info" data-v-1e9076fa data-v-41bcba48 data-v-1e9076fa><div class="info-box" data-v-1e9076fa><i class="reco-bgm reco-bgm-music music" data-v-1e9076fa></i>萤火之森
                    </div> <div class="info-box" data-v-1e9076fa><i class="reco-bgm reco-bgm-artist" data-v-1e9076fa></i>CMJ</div> <div class="reco-bgm-progress" data-v-1e9076fa><div class="progress-bar" data-v-1e9076fa><div class="bar" data-v-1e9076fa></div></div></div> <div class="reco-bgm-operation" data-v-1e9076fa><i class="reco-bgm reco-bgm-last last" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-play play" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-next next" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-1e9076fa></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-1e9076fa></i> <div class="volume-bar" data-v-1e9076fa><div class="bar" data-v-1e9076fa></div></div></div></div></div></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:190px;display:none;" data-v-5775ee02>
      欢迎来到 SUR的博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="150" height="220" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div></div><!----><div class="RibbonAnimation"></div></div></div>
    <script src="/blogs/assets/js/app.3997f0e0.js" defer></script><script src="/blogs/assets/js/3.d21b2854.js" defer></script><script src="/blogs/assets/js/1.09293f92.js" defer></script><script src="/blogs/assets/js/10.bbe20fb6.js" defer></script>
  </body>
</html>
